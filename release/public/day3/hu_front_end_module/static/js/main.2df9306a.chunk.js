(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(8),o=n.n(i),r=(n(13),n(2)),s=n(4),u=n(3),l=n(0);function j(e){var t,n,c,a,i=e.position,o=e.updatePosition;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"form-group mt-3",children:[Object(l.jsx)("label",{htmlFor:"link1",children:"Link Label at 1"}),Object(l.jsx)("input",{type:"text",className:"form-control",id:"link1",value:null!==(t=i.e1)&&void 0!==t?t:"",onChange:function(e){return o(Object(u.a)(Object(u.a)({},i),{},{e1:e.target.value}))}})]}),Object(l.jsxs)("div",{className:"form-group mt-3",children:[Object(l.jsx)("label",{htmlFor:"link2",children:"Link Label at 2"}),Object(l.jsx)("input",{type:"text",className:"form-control",id:"link2",value:null!==(n=i.e2)&&void 0!==n?n:"",onChange:function(e){return o(Object(u.a)(Object(u.a)({},i),{},{e2:e.target.value}))}})]}),Object(l.jsxs)("div",{className:"form-group mt-3",children:[Object(l.jsx)("label",{htmlFor:"link3",children:"Link Label at 3"}),Object(l.jsx)("input",{type:"text",className:"form-control",id:"link3",value:null!==(c=i.e3)&&void 0!==c?c:"",onChange:function(e){return o(Object(u.a)(Object(u.a)({},i),{},{e3:e.target.value}))}})]}),Object(l.jsxs)("div",{className:"form-group mt-3",children:[Object(l.jsx)("label",{htmlFor:"link4",children:"Link Label at 4"}),Object(l.jsx)("input",{type:"text",className:"form-control",id:"link4",value:null!==(a=i.e4)&&void 0!==a?a:"",onChange:function(e){return o(Object(u.a)(Object(u.a)({},i),{},{e4:e.target.value}))}})]})]})}n(15);function d(e){var t=e.positions,n=e.position,a=e.addElement,i=e.removeElement,o=e.updatePosition,s=e.setManual,d=e.manual,b=e.addLinkManual,f=Object(c.useState)(!1),O=Object(r.a)(f,2),m=O[0],v=O[1],p=Object(c.useState)(!1),h=Object(r.a)(p,2),x=h[0],g=h[1],w=Object(c.useState)(),N=Object(r.a)(w,2),k=N[0],y=N[1],S=function(e,t){e.shiftKey&&(console.log(e),e.preventDefault(),e.stopPropagation(),s({position:n,direction:t}))},C=function(e,t){d&&(e.preventDefault(),e.stopPropagation(),b({n1:d.position.n,n1e:d.direction,n2:n.n,n2e:t}))};return Object(c.useEffect)((function(){requestAnimationFrame((function(){v(!0),window.jQuery("#element-wrapper".concat(n.n)).draggable({start:function(e){e.shiftKey&&(e.preventDefault(),e.stopPropagation())},drag:function(){var e=window.jQuery("#element-wrapper".concat(n.n)),t=parseInt(e.css("top"))+90,c=parseInt(e.css("left"))+90;o(Object(u.a)(Object(u.a)({},n),{},{x:c,y:t}))},stop:function(){var e=window.jQuery("#element-wrapper".concat(n.n)),t=parseInt(e.css("top"))+90,c=parseInt(e.css("left"))+90;o(Object(u.a)(Object(u.a)({},n),{},{x:c,y:t}))}})}))}),[t,n,o]),Object(c.useEffect)((function(){requestAnimationFrame((function(){if(x&&!k){var e=window.CKEDITOR.replace("element-editor".concat(n.n));e.setData(n.data),y(e)}else!x&&k&&(o(Object(u.a)(Object(u.a)({},n),{},{data:k.getData()})),requestAnimationFrame((function(){k.destroy(),y(void 0)})));return function(){k&&k.destroy()}}))}),[x,k,n,o]),Object(l.jsxs)("div",{className:"element-wrapper",id:"element-wrapper".concat(n.n),style:{top:n.y-90,left:n.x-90},children:[n.n>1&&Object(l.jsx)("button",{className:"btn btn-danger btn-action btn-delete",onClick:function(){v(!1),setTimeout((function(){return i(n)}),400)},children:"X"}),Object(l.jsx)("button",{className:"btn btn-success btn-action btn-edit",onClick:function(){return g(!x)},children:"E"}),Object(l.jsxs)("div",{className:"element ".concat(m&&"visible"),children:[Object(l.jsx)("div",{className:"e e1",onClick:function(){return a(n,"e1")},onMouseDown:function(e){return S(e,"e1")},onMouseUp:function(e){return C(e,"e1")},children:Object(l.jsx)("span",{children:"1"})}),Object(l.jsx)("div",{className:"e e2",onClick:function(){return a(n,"e2")},onMouseDown:function(e){return S(e,"e2")},onMouseUp:function(e){return C(e,"e2")},children:Object(l.jsx)("span",{children:"2"})}),Object(l.jsx)("div",{className:"e e4",onClick:function(){return a(n,"e4")},onMouseDown:function(e){return S(e,"e4")},onMouseUp:function(e){return C(e,"e4")},children:Object(l.jsx)("span",{children:"4"})}),Object(l.jsx)("div",{className:"e e3",onClick:function(){return a(n,"e3")},onMouseDown:function(e){return S(e,"e3")},onMouseUp:function(e){return C(e,"e3")},children:Object(l.jsx)("span",{children:"3"})})]}),x&&Object(l.jsx)("div",{className:"card shadow-sm edit-card",children:Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)("h2",{className:"mb-3",children:"Edit Content of Slide"}),Object(l.jsx)("div",{id:"element-editor".concat(n.n)}),Object(l.jsx)(j,{position:n,updatePosition:o}),Object(l.jsx)("div",{className:"mt-3",children:Object(l.jsx)("button",{className:"btn btn-secondary",onClick:function(){return g(!x)},children:"Save and Close"})})]})})]})}function b(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),o=Object(r.a)(i,2),u=o[0],j=o[1],b=Object(c.useState)(),f=Object(r.a)(b,2),O=f[0],m=f[1],v=Object(c.useRef)();Object(c.useEffect)((function(){var e=localStorage.getItem("positions"),t=localStorage.getItem("links");e&&t?(a(JSON.parse(e)),j(JSON.parse(t))):(a([{x:window.innerWidth/2,y:window.innerHeight/2,n:1}]),j([]))}),[]),Object(c.useEffect)((function(){localStorage.setItem("positions",JSON.stringify(n)),localStorage.setItem("links",JSON.stringify(u))}),[n,u]);var p=function(e,t){return!!u.some((function(n){return n.n1===e&&n.n1e===t||n.n2===e&&n.n2e===t}))},h=function(e,t){var c,i,o,r=Math.max.apply(Math,Object(s.a)(n.map((function(e){return e.n}))))+1;switch(t){case"e1":if(p(e.n,"e1"))return;i="e1",o="e3",c={x:e.x,y:e.y-180,n:r};break;case"e2":if(p(e.n,"e2"))return;i="e2",o="e4",c={x:e.x+180,y:e.y,n:r};break;case"e3":if(p(e.n,"e3"))return;i="e3",o="e1",c={x:e.x,y:e.y+180,n:r};break;case"e4":if(p(e.n,"e4"))return;i="e4",o="e2",c={x:e.x-180,y:e.y,n:r}}a([].concat(Object(s.a)(n),[c])),j([].concat(Object(s.a)(u),[{n1:e.n,n1e:i,n2:c.n,n2e:o}]))},x=function(e){j(Object(s.a)(u.filter((function(t){var n=t.n1,c=t.n2;return!(n===e.n||c===e.n)})))),a(Object(s.a)(n.filter((function(t){return t.n!==e.n}))))},g=function(e){j([].concat(Object(s.a)(u),[e])),m(void 0)},w=function(e){a(Object(s.a)(n.map((function(t){return t.n===e.n?e:t}))))};return Object(c.useEffect)((function(){var e=v.current;e.width=window.innerWidth,e.height=window.innerHeight;var t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),u.forEach((function(e){var c=e.n1,a=e.n1e,i=e.n2,o=e.n2e,r=n.find((function(e){return e.n===c})),s=n.find((function(e){return e.n===i})),u="e4"===a?-45:"e2"===a?45:0,l="e1"===a?-45:"e3"===a?45:0,j="e4"===o?-45:"e2"===o?45:0,d="e1"===o?-45:"e3"===o?45:0;t.beginPath(),t.moveTo(r.x+u,r.y+l),t.lineTo(s.x+j,s.y+d),t.stroke()}))}),[u,n]),Object(l.jsxs)("div",{className:"h-100",children:[n.map((function(e){return Object(l.jsx)(d,{positions:n,position:e,addElement:h,removeElement:x,updatePosition:w,setManual:m,manual:O,addLinkManual:g},e.n)})),Object(l.jsx)("canvas",{ref:v})]})}function f(e){var t=e.slide,n=e.navigate,c=e.routes,a=e.route;return Object(l.jsx)(l.Fragment,{children:c&&c[a]&&Object(l.jsxs)("button",{className:"btn btn-primary mr-3",onClick:function(){return n(a)},children:[a.substr(1)," -"," ",t&&t[a]?t[a]:"Go to slide ".concat(c[a])]})})}function O(e){var t=e.slide,n=e.navigate,a=e.routes,i=e.goIn,o=e.goOut,s=Object(c.useState)(!0),u=Object(r.a)(s,2),j=u[0],d=u[1];Object(c.useEffect)((function(){requestAnimationFrame((function(){d(!1)}))}),[]);var b="container slide out-".concat(o," ").concat(i?"in ".concat(j&&"in-".concat(i)):"");return Object(l.jsxs)("div",{className:b,children:[Object(l.jsx)("div",{className:"text-center mb-3",children:Object(l.jsx)(f,{slide:t,navigate:n,routes:a,route:"e1"})}),Object(l.jsxs)("div",{className:"row d-flex align-items-center",children:[Object(l.jsx)("div",{className:"col-auto",children:Object(l.jsx)(f,{slide:t,navigate:n,routes:a,route:"e4"})}),Object(l.jsx)("div",{className:"col bg-white p-3",children:Object(l.jsx)("div",{className:"slider",dangerouslySetInnerHTML:{__html:null===t||void 0===t?void 0:t.data}})}),Object(l.jsx)("div",{className:"col-auto",children:Object(l.jsx)(f,{slide:t,navigate:n,routes:a,route:"e2"})})]}),Object(l.jsx)("div",{className:"text-center mt-3",children:Object(l.jsx)(f,{slide:t,navigate:n,routes:a,route:"e3"})})]})}n(16);function m(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),o=Object(r.a)(i,2),s=o[0],u=o[1],j=Object(c.useState)(1),d=Object(r.a)(j,2),b=d[0],f=d[1],m=Object(c.useState)(0),v=Object(r.a)(m,2),p=v[0],h=v[1],x=Object(c.useState)(),g=Object(r.a)(x,2),w=g[0],N=g[1],k=Object(c.useMemo)((function(){return n.find((function(e){return e.n===b}))}),[n,b]),y=Object(c.useMemo)((function(){return n.find((function(e){return e.n===p}))}),[n,p]),S=Object(c.useMemo)((function(){var e={};return null===s||void 0===s||s.forEach((function(t){var n=t.n1,c=t.n1e,a=t.n2,i=t.n2e;n===b&&(e[c]=a),a===b&&(e[i]=n)})),e}),[s,b]),C=Object(c.useMemo)((function(){var e={};return null===s||void 0===s||s.forEach((function(t){var n=t.n1,c=t.n1e,a=t.n2,i=t.n2e;n===p&&(e[c]=a),a===p&&(e[i]=n)})),e}),[s,p]),E=Object(c.useCallback)((function(e){S[e]&&(h(S[e]),N(e),setTimeout((function(){f(S[e]),h(0),N(void 0)}),1e3))}),[S,f]);return Object(c.useEffect)((function(){var e=localStorage.getItem("positions"),t=localStorage.getItem("links");e&&t?(a(JSON.parse(e)),u(JSON.parse(t))):(a([]),u([]))}),[]),Object(c.useEffect)((function(){var e=function(e){switch(e.keyCode){case 49:case 38:E("e1");break;case 50:case 39:E("e2");break;case 51:case 40:E("e3");break;case 52:case 37:E("e4")}};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),[E]),Object(l.jsx)("div",{className:"h-100 bg-light overflow-hidden",children:y?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(O,{slide:k,navigate:E,routes:S,goOut:w}),Object(l.jsx)(O,{slide:y,navigate:E,routes:C,goIn:w})]}):Object(l.jsx)(O,{slide:k,navigate:E,routes:S})})}var v=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useRef)();return Object(l.jsxs)("div",{className:"app h-100",ref:i,children:[Object(l.jsx)("img",{src:"".concat("http://localhost/day3/hu_front_end_module","/knowledge_explorer.png"),className:"position-absolute logo",width:120,alt:"logo"}),Object(l.jsx)("button",{className:"btn btn-secondary position-absolute mode-btn",onClick:function(){!n&&i.current.requestFullscreen?i.current.requestFullscreen():document.exitFullscreen&&document.exitFullscreen(),a(!n)},children:n?"Design mode":"Presentation mode"}),n?Object(l.jsx)(m,{}):Object(l.jsx)(b,{})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),i(e),o(e)}))};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(v,{})}),document.getElementById("root")),p()}},[[17,1,2]]]);
//# sourceMappingURL=main.2df9306a.chunk.js.map