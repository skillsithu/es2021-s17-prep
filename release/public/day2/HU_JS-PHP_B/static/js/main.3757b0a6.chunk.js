(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{36:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(28),i=c.n(a),r=(c(36),c(4)),o=c(6),l=c(2),d=c(29),j=c.n(d).a.create({baseURL:"http://localhost/day2/HU_JS-PHP_A/api/v1"}),b=c(0);function h(e){var t=e.isLoggedIn,c=e.setIsLoggedIn,n=Object(l.e)();return Object(b.jsxs)("header",{className:"d-flex justify-content-between align-items-center py-2 px-4 bg-white border-bottom shadow-sm",children:[Object(b.jsx)(o.b,{to:"/",className:"text-decoration-none",children:Object(b.jsx)("h3",{children:"Event Booking Platform"})}),t?Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"mr-3",children:"Username"}),Object(b.jsx)("button",{type:"button",className:"btn btn-outline-secondary login-btn",onClick:function(){j.post("/logout").then((function(){c(!1),n.push("/login")}))},children:"Logout"})]}):Object(b.jsx)(o.b,{to:"/login",children:Object(b.jsx)("button",{type:"button",className:"btn btn-outline-primary login-btn",children:"Login"})})]})}function m(){var e=Object(l.f)(),t=Object(n.useState)(),c=Object(r.a)(t,2),s=c[0],a=c[1];return Object(n.useEffect)((function(){j.get("organizers/".concat(e.organizer,"/events/").concat(e.event)).then((function(e){var t=e.data;a(t)}))}),[e]),s?Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[Object(b.jsx)("h4",{children:s.name}),Object(b.jsx)(o.b,{to:"/register/".concat(e.organizer,"/").concat(e.event),id:"register",children:Object(b.jsx)("button",{type:"button",className:"btn btn-outline-primary login-btn",children:"Register for this event"})})]}),Object(b.jsxs)("div",{className:"row border-bottom mb-1",children:[Object(b.jsx)("div",{className:"col-4"}),Object(b.jsx)("div",{className:"col-2",children:"9:00"}),Object(b.jsx)("div",{className:"col-2",children:"11:00"}),Object(b.jsx)("div",{className:"col-2",children:"13:00"}),Object(b.jsx)("div",{className:"col-2",children:"15:00"})]}),s.channels.map((function(t){return Object(b.jsxs)("div",{className:"row border-bottom",children:[Object(b.jsx)("div",{className:"col-2 py-1 my-1 channel",children:t.name}),Object(b.jsx)("div",{className:"col-2",children:t.rooms.map((function(e){return Object(b.jsx)("div",{className:"room p-1 my-1",children:e.name},e.id)}))}),Object(b.jsx)("div",{className:"col-8",children:t.rooms.map((function(t){return Object(b.jsx)("div",{children:t.sessions.map((function(t){return Object(b.jsx)(o.b,{to:"/session/".concat(e.organizer,"/").concat(e.event,"/").concat(t.id),className:"session my-1 mr-1 d-inline-block text-reset border p-1",children:t.title},t.id)}))},t.id)}))})]},t.id)}))]})}):Object(b.jsx)(b.Fragment,{})}var u=c(18);function O(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){j.get("events").then((function(e){var t=e.data;return s(t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{date:new Date(e.date).toDateString()})})).sort((function(e,t){return new Date(e.date)-new Date(t.date)})))}))}),[]),Object(b.jsx)("div",{children:c.map((function(e){return Object(b.jsx)(o.b,{to:"/agenda/".concat(e.organizer.slug,"/").concat(e.slug),className:"event text-reset text-decoration-none",children:Object(b.jsx)("div",{className:"card mb-4",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:e.name}),Object(b.jsxs)("p",{className:"card-text",children:["Organizer: ",e.organizer.name,", ",e.date]})]})})},e.id)}))})}function x(e){var t=e.setIsLoggedIn,c=Object(l.e)(),s=Object(n.useState)(""),a=Object(r.a)(s,2),i=a[0],o=a[1],d=Object(n.useState)(""),h=Object(r.a)(d,2),m=h[0],u=h[1];return Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("main",{className:"col-md-6 mx-sm-auto px-4 card",children:[Object(b.jsx)("div",{className:"pt-3 pb-2 mb-3 border-bottom text-center",children:Object(b.jsx)("h1",{className:"h2",children:"Login"})}),Object(b.jsxs)("form",{className:"form-signin",onSubmit:function(e){e.preventDefault(),e.stopPropagation(),i&&m&&j.post("/login",{lastname:i,registration_code:m}).then((function(){t(!0),c.push("/")}))},children:[Object(b.jsx)("label",{htmlFor:"lastname",children:"Lastname"}),Object(b.jsx)("input",{type:"text",id:"lastname",name:"lastname",className:"form-control mb-3",placeholder:"Lastname",autoFocus:!0,required:!0,onChange:function(e){return o(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"registration_code",children:"Registration Code"}),Object(b.jsx)("input",{type:"text",id:"registration_code",name:"registration_code",className:"form-control mb-3",placeholder:"Registration Code",required:!0,onChange:function(e){return u(e.target.value)}}),Object(b.jsx)("button",{className:"btn btn-lg btn-primary btn-block mb-3",id:"login",type:"submit",children:"Sign in"})]})]})})})}var v=c(31);function f(e){var t=e.isLoggedIn,c=Object(l.f)(),s=Object(l.e)(),a=Object(n.useState)(),i=Object(r.a)(a,2),o=i[0],d=i[1],h=Object(n.useState)(),m=Object(r.a)(h,2),u=m[0],O=m[1],x=Object(n.useState)([]),f=Object(r.a)(x,2),g=f[0],p=f[1],N=Object(n.useMemo)((function(){return g.reduce((function(e,t){return e+parseInt(t.cost,10)}),0)}),[g]),y=Object(n.useMemo)((function(){return u?parseInt(u.cost,10):0}),[u]),k=Object(n.useMemo)((function(){var e=[];return null===o||void 0===o||o.channels.forEach((function(t){return t.rooms.forEach((function(t){return t.sessions.forEach((function(t){"workshop"===t.type&&e.push(t)}))}))})),e}),[o]);return Object(n.useEffect)((function(){j.get("organizers/".concat(c.organizer,"/events/").concat(c.event)).then((function(e){var t=e.data;d(t)}))}),[c]),Object(n.useEffect)((function(){t||s.push("/login")}),[s,t]),o?Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:Object(b.jsx)("h4",{children:o.name})}),Object(b.jsx)("h5",{className:"font-weight-normal",children:"Select your ticket"}),Object(b.jsx)("div",{className:"row",children:o.tickets.map((function(e){return Object(b.jsx)("div",{className:"col-4 mb-3",children:Object(b.jsx)("div",{className:"card shadow-sm",children:Object(b.jsx)("div",{className:"card-body",children:Object(b.jsxs)("div",{className:"form-check",children:[Object(b.jsx)("input",{className:"form-check-input ticket",type:"radio",name:"ticket",id:"ticket".concat(e.id),value:e.id,disabled:!e.available,onChange:function(){return O(e)}}),Object(b.jsxs)("label",{className:"form-check-label",htmlFor:"ticket".concat(e.id),children:[Object(b.jsxs)("h5",{className:"card-title",children:[e.name," - ",e.cost,".-"]}),Object(b.jsxs)("p",{className:"card-text",children:[e.available?e.description:"Unavailable","\xa0"]})]})]})})})},e.id)}))}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-6",children:[Object(b.jsx)("h5",{className:"font-weight-normal mt-3",children:"Select additional workshops you want to book"}),k.map((function(e){return Object(b.jsxs)("div",{className:"form-check",children:[Object(b.jsx)("input",{className:"form-check-input workshop",type:"checkbox",value:e.id,id:"ws".concat(e.id),onChange:function(){return t=e,void(g.includes(t)?p(g.filter((function(e){return e.id!==t.id}))):p([].concat(Object(v.a)(g),[t])));var t}}),Object(b.jsxs)("label",{className:"form-check-label",htmlFor:"ws".concat(e.id),children:[e.title," - ",e.cost,".-"]})]},e.id)}))]}),Object(b.jsxs)("div",{className:"col-6",children:[Object(b.jsx)("h5",{className:"mt-3 pr-3 text-right",children:"Checkout"}),Object(b.jsx)("div",{className:"d-flex justify-content-end",children:Object(b.jsx)("table",{className:"table w-auto",children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Event ticket"}),Object(b.jsxs)("td",{id:"event-cost",children:[y,".-"]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Additional workshops"}),Object(b.jsxs)("td",{id:"additional-cost",children:[N,".-"]})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Total"}),Object(b.jsxs)("th",{id:"total-cost",children:[y+N,".-"]})]})]})})}),Object(b.jsx)("div",{className:"pr-3 text-right",children:Object(b.jsx)("button",{type:"button",className:"btn btn-primary",id:"purchase",onClick:function(){j.post("organizers/".concat(c.organizer,"/events/").concat(c.event,"/registration"),{ticket_id:u.id,session_ids:g.map((function(e){return e.id}))}).then((function(){alert("Registration successful"),s.push("/agenda/".concat(c.organizer,"/").concat(c.event))}))},disabled:!u,children:"Purchase"})})]})]})]})}):Object(b.jsx)(b.Fragment,{})}function g(){var e=Object(l.f)(),t=Object(n.useState)(),c=Object(r.a)(t,2),s=c[0],a=c[1];return Object(n.useEffect)((function(){j.get("organizers/".concat(e.organizer,"/events/").concat(e.event)).then((function(t){var c;t.data.channels.forEach((function(t){return t.rooms.forEach((function(t){return t.sessions.forEach((function(t){parseInt(t.id,10)===parseInt(e.session,10)&&(c=t)}))}))})),a(c)}))}),[e]),s?Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("h4",{children:[s.title," - ",s.type]}),Object(b.jsx)("p",{children:s.description}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-2",children:"Speaker"}),Object(b.jsx)("div",{className:"col",children:s.speaker})]}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-2",children:"Start"}),Object(b.jsx)("div",{className:"col",children:s.start})]}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-2",children:"End"}),Object(b.jsx)("div",{className:"col",children:s.end})]}),s.cost&&Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-2",children:"Cost"}),Object(b.jsx)("div",{className:"col",children:s.cost})]})]})}):Object(b.jsx)(b.Fragment,{})}var p=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),c=t[0],s=t[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(h,{isLoggedIn:c,setIsLoggedIn:s}),Object(b.jsxs)("main",{className:"p-4",children:[Object(b.jsx)(l.a,{path:"/login",children:Object(b.jsx)(x,{setIsLoggedIn:s})}),Object(b.jsx)(l.a,{path:"/agenda/:organizer/:event",children:Object(b.jsx)(m,{})}),Object(b.jsx)(l.a,{path:"/register/:organizer/:event",children:Object(b.jsx)(f,{isLoggedIn:c})}),Object(b.jsx)(l.a,{path:"/session/:organizer/:event/:session",children:Object(b.jsx)(g,{})}),Object(b.jsx)(l.a,{path:"/",exact:!0,children:Object(b.jsx)(O,{})})]})]})})},N=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,62)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),s(e),a(e),i(e)}))};i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root")),N()}},[[61,1,2]]]);
//# sourceMappingURL=main.3757b0a6.chunk.js.map