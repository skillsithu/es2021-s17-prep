{"version":3,"sources":["api.js","map.svg","App.js","reportWebVitals.js","index.js"],"names":["api","axios","create","baseURL","handleError","error","str","response","data","message","request","console","log","config","alert","App","useState","places","setPlaces","routes","setRoutes","from","setFrom","to","setTo","hours","setHours","minutes","setMinutes","localStorage","getItem","username","setUsername","password","setPassword","showDialog","setShowDialog","apiToken","setApiToken","role","setRole","route","setRoute","isLoggedIn","isAdmin","setSearch","value","setter","place","find","name","id","useEffect","get","then","catch","className","onSubmit","event","preventDefault","stopPropagation","post","setItem","token","type","placeholder","onChange","e","target","onClick","removeItem","time","list","map","min","max","idx","schedules","from_place_id","to_place_id","schedule_id","select","from_place","departure_time","to_place","arrival_time","travel_time","type_name","line","length","src","alt","isSelected","style","top","y","left","x","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.877c3ad4.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const api = axios.create({\r\n  baseURL: \"http://localhost/ws2017_day2/HU_Server_A/api/v1\",\r\n});\r\n\r\nexport const handleError = (error) => {\r\n  let str;\r\n\r\n  if (error.response) {\r\n    str = error.response.data.message;\r\n  } else if (error.request) {\r\n    str = error.request;\r\n  } else {\r\n    str = error.message;\r\n  }\r\n\r\n  console.log(error.config, str);\r\n\r\n  alert(str);\r\n};\r\n","export default __webpack_public_path__ + \"static/media/map.40c87800.svg\";","import { useEffect, useState } from \"react\";\nimport { api, handleError } from \"./api\";\nimport map from \"./map.svg\";\n\nfunction App() {\n  // Local state\n  const [places, setPlaces] = useState([]);\n  const [routes, setRoutes] = useState([]);\n  const [from, setFrom] = useState(0);\n  const [to, setTo] = useState(0);\n  const [hours, setHours] = useState(\"\");\n  const [minutes, setMinutes] = useState(\"\");\n  const [username, setUsername] = useState(\n    localStorage.getItem(\"username\") ?? \"\"\n  );\n  const [password, setPassword] = useState(\"\");\n  const [showDialog, setShowDialog] = useState(false);\n  const [apiToken, setApiToken] = useState(\n    localStorage.getItem(\"apiToken\") ?? \"\"\n  );\n  const [role, setRole] = useState(localStorage.getItem(\"role\") ?? \"\");\n  const [route, setRoute] = useState();\n\n  const isLoggedIn = !!apiToken;\n  const isAdmin = role === \"ADMIN\";\n\n  // Handle to/from inputs\n  const setSearch = (value, setter) => {\n    const place = places.find(({ name }) => name === value);\n\n    if (place) {\n      setter(place.id);\n    } else {\n      setter(0);\n    }\n  };\n\n  // Get routes query\n  const getRoutes = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (from > 0 && to > 0) {\n      // Use time if set\n      let time = \"\";\n      if (hours !== \"\" && minutes !== \"\") {\n        time = `/${hours}:${minutes}`;\n      }\n\n      // GET routes\n      api\n        .get(`/route/search/${from}/${to}${time}`)\n        .then(({ data }) => {\n          setRoutes(data);\n        })\n        .catch(handleError);\n    }\n  };\n\n  // Login\n  const login = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    api\n      .post(\"/auth/login\", { username, password })\n      .then(({ data }) => {\n        localStorage.setItem(\"apiToken\", data.token);\n        localStorage.setItem(\"role\", data.role);\n        localStorage.setItem(\"username\", username);\n        setApiToken(data.token);\n        setRole(data.role);\n        setPassword(\"\");\n        setShowDialog(false);\n      })\n      .catch(handleError);\n  };\n\n  // Logout\n  const logout = () => {\n    api\n      .get(`/auth/logout?token=${apiToken}`)\n      .then(() => {\n        localStorage.removeItem(\"apiToken\");\n        localStorage.removeItem(\"role\");\n        localStorage.removeItem(\"username\");\n        setApiToken(\"\");\n        setRole(\"\");\n        setUsername(\"\");\n      })\n      .catch(handleError);\n  };\n\n  // Save selection\n  const select = (data) => {\n    setRoute(data);\n\n    if (isLoggedIn) {\n      api\n        .post(`/route/selection?token=${apiToken}`, {\n          from_place_id: data.from_place_id,\n          to_place_id: data.to_place_id,\n          schedule_id: data.id,\n        })\n        .then(() => {})\n        .catch(handleError);\n    }\n  };\n\n  // Load places on page load\n  useEffect(() => {\n    api\n      .get(\"/place\")\n      .then(({ data }) => {\n        setPlaces(data);\n      })\n      .catch(handleError);\n  }, []);\n\n  return (\n    <div className=\"wrapper\">\n      {showDialog && (\n        <div className=\"dialog\">\n          <h2 className=\"heading\">Login</h2>\n          <form onSubmit={login}>\n            <div className=\"form-group\">\n              <input\n                type=\"text\"\n                name=\"username\"\n                placeholder=\"Username: \"\n                className=\"input\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n              />\n            </div>\n            <div className=\"form-group\">\n              <input\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Password: \"\n                className=\"input\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </div>\n            <div className=\"form-group form-content-right\">\n              <button type=\"submit\" className=\"btn btn-submit\">\n                Login\n              </button>\n              <button\n                type=\"reset\"\n                className=\"btn ml-3\"\n                onClick={() => setShowDialog(false)}\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      )}\n      <div className=\"container\">\n        <aside className=\"side\">\n          <div className=\"item action\">\n            <ul className=\"nav\">\n              <li>\n                {!isLoggedIn && (\n                  <button\n                    className=\"login_btn\"\n                    onClick={() => setShowDialog(true)}\n                  >\n                    Login\n                  </button>\n                )}\n                {isLoggedIn && (\n                  <>\n                    <h4 className=\"heading\">{username}</h4>\n                    <button className=\"login_btn\" onClick={logout}>\n                      Logout\n                    </button>\n                    {isAdmin && (\n                      <>\n                        <button className=\"login_btn\">Create place</button>\n                        <button className=\"login_btn\">Update place</button>\n                        <button className=\"login_btn\">Delete place</button>\n                      </>\n                    )}\n                  </>\n                )}\n              </li>\n            </ul>\n          </div>\n          <div className=\"item form\">\n            <h1 className=\"heading\">Bani Yas Travel</h1>\n            <div className=\"panel-content\">\n              <form onSubmit={getRoutes}>\n                <div className=\"form-group\">\n                  <input\n                    type=\"search\"\n                    name=\"from\"\n                    placeholder=\"From: \"\n                    className=\"input\"\n                    list=\"places\"\n                    onChange={(e) => setSearch(e.target.value, setFrom)}\n                  />\n                  <datalist id=\"places\">\n                    {places.map((place) => {\n                      return (\n                        <option value={place.name} key={place.id}>\n                          {place.id}\n                        </option>\n                      );\n                    })}\n                  </datalist>\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"search\"\n                    name=\"target\"\n                    placeholder=\"Target: \"\n                    className=\"input\"\n                    list=\"places\"\n                    onChange={(e) => setSearch(e.target.value, setTo)}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"number\"\n                    name=\"hours\"\n                    placeholder=\"Hours: \"\n                    className=\"input\"\n                    min={0}\n                    max={24}\n                    value={hours}\n                    onChange={(e) => setHours(e.target.value)}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <input\n                    type=\"number\"\n                    name=\"minutes\"\n                    placeholder=\"Minutes: \"\n                    className=\"input\"\n                    min={0}\n                    max={60}\n                    value={minutes}\n                    onChange={(e) => setMinutes(e.target.value)}\n                  />\n                </div>\n                <div className=\"form-group form-content-right\">\n                  <button type=\"submit\" className=\"btn btn-submit\">\n                    Get Routes\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n          <div className=\"item panel-list\">\n            <ul className=\"result-list\">\n              {routes.map((route, idx) => {\n                const data = route.schedules[0];\n                return (\n                  <li key={idx} onClick={() => select(data)}>\n                    <ul className=\"result-detail\">\n                      <li>\n                        <label>From: </label>\n                        <p>\n                          {data.from_place.name} at {data.departure_time}\n                        </p>\n                      </li>\n                      <li>\n                        <label>To: </label>\n                        <p>\n                          {data.to_place.name} at {data.arrival_time}\n                        </p>\n                      </li>\n                      <li>\n                        <label>Time Schedule: </label>\n                        <p>\n                          {data.departure_time} - {data.arrival_time} (\n                          {data.travel_time} minutes)\n                        </p>\n                      </li>\n                      <li>\n                        <label>Lines: </label>\n                        <p>\n                          {data.type_name} Line {data.line},{\" \"}\n                          {route.schedules.length - 1} transfer\n                        </p>\n                      </li>\n                    </ul>\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        </aside>\n        <main className=\"map\">\n          <div className=\"map-container\">\n            <img src={map} alt=\"map\" />\n            {places.map((place) => {\n              const isSelected =\n                place.id === route?.from_place_id ||\n                place.id === route?.to_place_id;\n              return (\n                <div\n                  className={`dot ${isSelected ? \"selected\" : \"\"}`}\n                  style={{ top: place.y, left: place.x }}\n                >\n                  <span>{place.name}</span>\n                </div>\n              );\n            })}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport './style.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}