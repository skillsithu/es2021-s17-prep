(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{19:function(e,t,c){},20:function(e,t,c){},40:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(13),l=c.n(s),i=(c(19),c(20),c(3)),r=c(14),o=c.n(r).a.create({baseURL:"http://localhost/ws2017_day2/HU_Server_A/api/v1"}),j=function(e){var t;t=e.response?e.response.data.message:e.request?e.request:e.message,console.log(e.config,t),alert(t)},u=c.p+"static/media/map.40c87800.svg",d=c(0);var m=function(){var e,t,c,n=Object(a.useState)([]),s=Object(i.a)(n,2),l=s[0],r=s[1],m=Object(a.useState)([]),b=Object(i.a)(m,2),h=b[0],p=b[1],O=Object(a.useState)(0),g=Object(i.a)(O,2),x=g[0],v=g[1],f=Object(a.useState)(0),N=Object(i.a)(f,2),_=N[0],S=N[1],C=Object(a.useState)(""),y=Object(i.a)(C,2),k=y[0],I=y[1],L=Object(a.useState)(""),T=Object(i.a)(L,2),w=T[0],F=T[1],D=Object(a.useState)(null!==(e=localStorage.getItem("username"))&&void 0!==e?e:""),P=Object(i.a)(D,2),U=P[0],B=P[1],M=Object(a.useState)(""),q=Object(i.a)(M,2),A=q[0],E=q[1],H=Object(a.useState)(!1),J=Object(i.a)(H,2),R=J[0],G=J[1],Y=Object(a.useState)(null!==(t=localStorage.getItem("apiToken"))&&void 0!==t?t:""),z=Object(i.a)(Y,2),K=z[0],Q=z[1],V=Object(a.useState)(null!==(c=localStorage.getItem("role"))&&void 0!==c?c:""),W=Object(i.a)(V,2),X=W[0],Z=W[1],$=Object(a.useState)(),ee=Object(i.a)($,2),te=ee[0],ce=ee[1],ae=!!K,ne="ADMIN"===X,se=function(e,t){var c=l.find((function(t){return t.name===e}));t(c?c.id:0)};return Object(a.useEffect)((function(){o.get("/place").then((function(e){var t=e.data;r(t)})).catch(j)}),[]),Object(d.jsxs)("div",{className:"wrapper",children:[R&&Object(d.jsxs)("div",{className:"dialog",children:[Object(d.jsx)("h2",{className:"heading",children:"Login"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),o.post("/auth/login",{username:U,password:A}).then((function(e){var t=e.data;localStorage.setItem("apiToken",t.token),localStorage.setItem("role",t.role),localStorage.setItem("username",U),Q(t.token),Z(t.role),E(""),G(!1)})).catch(j)},children:[Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"text",name:"username",placeholder:"Username: ",className:"input",value:U,onChange:function(e){return B(e.target.value)}})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"password",name:"password",placeholder:"Password: ",className:"input",value:A,onChange:function(e){return E(e.target.value)}})}),Object(d.jsxs)("div",{className:"form-group form-content-right",children:[Object(d.jsx)("button",{type:"submit",className:"btn btn-submit",children:"Login"}),Object(d.jsx)("button",{type:"reset",className:"btn ml-3",onClick:function(){return G(!1)},children:"Cancel"})]})]})]}),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsxs)("aside",{className:"side",children:[Object(d.jsx)("div",{className:"item action",children:Object(d.jsx)("ul",{className:"nav",children:Object(d.jsxs)("li",{children:[!ae&&Object(d.jsx)("button",{className:"login_btn",onClick:function(){return G(!0)},children:"Login"}),ae&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h4",{className:"heading",children:U}),Object(d.jsx)("button",{className:"login_btn",onClick:function(){o.get("/auth/logout?token=".concat(K)).then((function(){localStorage.removeItem("apiToken"),localStorage.removeItem("role"),localStorage.removeItem("username"),Q(""),Z(""),B("")})).catch(j)},children:"Logout"}),ne&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"login_btn",children:"Create place"}),Object(d.jsx)("button",{className:"login_btn",children:"Update place"}),Object(d.jsx)("button",{className:"login_btn",children:"Delete place"})]})]})]})})}),Object(d.jsxs)("div",{className:"item form",children:[Object(d.jsx)("h1",{className:"heading",children:"Bani Yas Travel"}),Object(d.jsx)("div",{className:"panel-content",children:Object(d.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),x>0&&_>0){var t="";""!==k&&""!==w&&(t="/".concat(k,":").concat(w)),o.get("/route/search/".concat(x,"/").concat(_).concat(t)).then((function(e){var t=e.data;p(t)})).catch(j)}},children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("input",{type:"search",name:"from",placeholder:"From: ",className:"input",list:"places",onChange:function(e){return se(e.target.value,v)}}),Object(d.jsx)("datalist",{id:"places",children:l.map((function(e){return Object(d.jsx)("option",{value:e.name,children:e.id},e.id)}))})]}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"search",name:"target",placeholder:"Target: ",className:"input",list:"places",onChange:function(e){return se(e.target.value,S)}})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",name:"hours",placeholder:"Hours: ",className:"input",min:0,max:24,value:k,onChange:function(e){return I(e.target.value)}})}),Object(d.jsx)("div",{className:"form-group",children:Object(d.jsx)("input",{type:"number",name:"minutes",placeholder:"Minutes: ",className:"input",min:0,max:60,value:w,onChange:function(e){return F(e.target.value)}})}),Object(d.jsx)("div",{className:"form-group form-content-right",children:Object(d.jsx)("button",{type:"submit",className:"btn btn-submit",children:"Get Routes"})})]})})]}),Object(d.jsx)("div",{className:"item panel-list",children:Object(d.jsx)("ul",{className:"result-list",children:h.map((function(e,t){var c=e.schedules[0];return Object(d.jsx)("li",{onClick:function(){return function(e){ce(e),ae&&o.post("/route/selection?token=".concat(K),{from_place_id:e.from_place_id,to_place_id:e.to_place_id,schedule_id:e.id}).then((function(){})).catch(j)}(c)},children:Object(d.jsxs)("ul",{className:"result-detail",children:[Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{children:"From: "}),Object(d.jsxs)("p",{children:[c.from_place.name," at ",c.departure_time]})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{children:"To: "}),Object(d.jsxs)("p",{children:[c.to_place.name," at ",c.arrival_time]})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{children:"Time Schedule: "}),Object(d.jsxs)("p",{children:[c.departure_time," - ",c.arrival_time," (",c.travel_time," minutes)"]})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{children:"Lines: "}),Object(d.jsxs)("p",{children:[c.type_name," Line ",c.line,","," ",e.schedules.length-1," transfer"]})]})]})},t)}))})})]}),Object(d.jsx)("main",{className:"map",children:Object(d.jsxs)("div",{className:"map-container",children:[Object(d.jsx)("img",{src:u,alt:"map"}),l.map((function(e){var t=e.id===(null===te||void 0===te?void 0:te.from_place_id)||e.id===(null===te||void 0===te?void 0:te.to_place_id);return Object(d.jsx)("div",{className:"dot ".concat(t?"selected":""),style:{top:e.y,left:e.x},children:Object(d.jsx)("span",{children:e.name})})}))]})})]})]})},b=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,41)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,l=t.getTTFB;c(e),a(e),n(e),s(e),l(e)}))};l.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(m,{})}),document.getElementById("root")),b()}},[[40,1,2]]]);
//# sourceMappingURL=main.877c3ad4.chunk.js.map